<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClaimRight - Report Items</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="/Front_End/css/navigation-bar.css">
    <link rel="stylesheet" href="/Front_End/css/page-styles.css">
    <link rel="stylesheet" href="/Front_End/css/lost-items-page.css">
    <link rel="stylesheet" href="/Front_End/css/payment-page.css">

    <link rel="icon" href="/Front_End/assets/images/Leonardo_Phoenix_09_Design_a_modern_clean_logo_for_a_Lost_and_0.jpg" type="image">

</head>
<body>
    <div id="navbar-container"></div>

    <h1 class="mb-4 fw-bold text-center page-header-title fade-in">Lost Items</h1>
    <div class="sticky-controls fade-in">
        <div class="dash-top-container d-flex justify-content-between align-items-center p-2">
            <div class="sort-dropdown-container">
                <label for="dashboard-sort">Sort By</label>
                <select id="dashboard-sort" class="form-select">
                    <option value="newest">Newest</option>
                    <option value="oldest">Oldest</option>
                </select>
            </div>

            <div class="dashboard-search-container">
                <div class="search-inner-container d-flex">
                    <input type="text" id="dashboard-search" placeholder="Search for items..." class="form-control"/>
                    <button id="dashboard-search-btn" class="btn btn-primary ms-2"><i class="fas fa-search"></i> Search</button>
                </div>
            </div>
        </div>
    </div>
    <div class="sticky-sentinel"></div>


    <div class="main-content-container fade-in">


    </div>



    <div id="imageModal" class="modal">
      <span class="close">&times;</span>
      <img class="modal-content" id="modalImage" alt="">
    </div>

    
    <!-- Floating Report Button -->
    <button class="floating-page-btn" onclick="openReportLostItem()">
    <i class="bi bi-exclamation-octagon-fill"></i>&nbsp;&nbsp;Report a Lost Item
    </button>

    <!-- Report a Lost Item Modal -->
   <div id="reportLostItemModal" class="modal" style="display:none;">
      <div class="modal-content" style="max-width: 500px; margin: 10% auto; padding: 20px; background: white; border-radius: 8px; position: relative;">
        <span class="close" id="reportCloseBtn" style="position: absolute; top: 10px; right: 15px; font-size: 28px; cursor: pointer;">&times;</span>
        <h3>Report a Lost Item</h3>
        <form id="reportLostItemForm" enctype="multipart/form-data">
          <div class="mb-3">
            <label for="itemName" class="form-label">Item Name</label>
            <input type="text" id="itemName" name="itemName" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="itemDescription" class="form-label">Description</label>
            <textarea id="itemDescription" name="detailedDescription" class="form-control" rows="3" required></textarea>
          </div>
          <div class="mb-3">
            <label for="lostLocation" class="form-label">Location Lost
              <br>
                <span class="label-instructions">
                Enter the location where you lost the item as clearly as possible.  
                (e.g., "Colombo Fort Railway Station, near platform 3" instead of just "Colombo")
                </span>
            </label>
            <input type="text" id="lostLocation" name="locationLost" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="lostDate" class="form-label">Date Lost</label>
            <input type="date" id="lostDate" name="dateLost" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="imageUpload" class="form-label">Upload Image (If available)
              <br><span class="label-instructions">Upload a clear image of your item. Make sure to include any unique identifiers (scratches, logos, engravings, etc.) that can prove it belongs to you.</span>
            </label>
            <!-- File Input (unchanged) -->
            <input type="file" id="imageUpload" name="imageFile" class="form-control d-none" accept="image/*">
            <!-- Drag & Drop Zone -->
            <div id="dropZone" style="margin-top:10px; padding:30px; border:2px dashed #ccc; border-radius:8px; text-align:center; cursor:pointer;">
              Drag & Drop Image Here or Click to Browse
            </div>
            <div id="imagePreviewContainer" style="margin-top: 10px; display: none;">
              <img id="imagePreview" src="" alt="Image Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px; display: block; margin-bottom: 10px;">
              <button type="button" id="removeImageBtn" class="btn btn-sm btn-outline-danger">Remove</button>
            </div> 
          </div>
          <div class="mb-3">
            <label for="reward" class="form-label">Reward (USD) (Optional)</label>
            <input type="number" id="reward" name="reward" class="form-control" step="0.01" min="0" placeholder="Enter reward amount">
          </div>
          <div class="mb-3">
            <label for="selectCategory" class="form-label">Select Category</label>
            <div id="categoryOptionsContainer"></div>
            <div id="selectedCategoriesContainer" style="margin-bottom: 8px; min-height: 30px;"></div>
          </div>
          <button type="submit" class="btn btn-primary">Submit Report</button>
        </form>
      </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal fade" id="securePaymentModal" tabindex="-1" aria-labelledby="securePaymentLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content secure-modal">

          <!-- Header -->
          <div class="modal-header secure-modal-header d-flex justify-content-between align-items-center">
            <i class="bi bi-shield-lock-fill fs-4"></i>
            <h5 class="modal-title mx-auto" id="securePaymentLabel">Payment</h5>
            <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <!-- Body -->
          <div class="modal-body">
            <form id="payment-form">
              <!-- Stripe Payment Element (new unified UI) -->
              <div id="payment-element" class="mb-3"></div>

              <!-- Errors -->
              <div id="payment-errors" role="alert" class="text-danger mb-3"></div>

              <!-- Submit Button -->
              <button id="submit-payment" class="btn btn-primary w-100 mt-2">Pay <span id="payment-amount"></span></button>
            </form>
          </div>

          <!-- Footer -->
          <div class="modal-footer secure-modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <a href="/Front_End/html/chat-page.html" class="btn btn-primary">
              <i class="bi bi-chat-dots-fill"></i> Contact Support
            </a>
          </div>

        </div>
      </div>
    </div>

    <!-- Loading overlay -->
    <div id="loadingOverlay" style="display: none;">
        Submitting report...
    </div>



    <div id="login-popup-container"></div>
    <div id="edit-profile-container"></div>
    <div id="footer-container"></div>
    <div id="loading-animation"></div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://js.stripe.com/v3/"></script>


    <script src="/Front_End/js/lostItemPageImproved.js"></script>
    <script src="/Front_End/js/navigationBar.js"></script>
    <script src="/Front_End/js/loginSignup.js"></script>
    <script src="/Front_End/js/updateOwnProfile.js"></script>
    <script src="/Front_End/js/pageCommon.js"></script>
</body>
</html>